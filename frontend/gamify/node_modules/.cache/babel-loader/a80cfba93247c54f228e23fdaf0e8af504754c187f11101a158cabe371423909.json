{"ast":null,"code":"// Simple localStorage-backed storage for demo purposes\nconst STORAGE_KEYS = {\n  users: 'glp_users',\n  currentUser: 'glp_current_user',\n  classes: 'glp_classes'\n};\nexport const getJson = (key, fallback) => {\n  try {\n    const raw = localStorage.getItem(key);\n    return raw ? JSON.parse(raw) : fallback;\n  } catch (e) {\n    return fallback;\n  }\n};\nexport const setJson = (key, value) => {\n  localStorage.setItem(key, JSON.stringify(value));\n};\nexport const bootstrapDefaults = () => {\n  const users = getJson(STORAGE_KEYS.users, []);\n  if (!users.length) {\n    setJson(STORAGE_KEYS.users, [{\n      id: 'u1',\n      role: 'admin',\n      name: 'Principal',\n      email: 'admin@school.com',\n      password: 'admin123',\n      verified: true\n    }, {\n      id: 'u2',\n      role: 'teacher',\n      name: 'Ms. Smith',\n      email: 'teacher@school.com',\n      password: 'teacher123',\n      verified: true\n    }, {\n      id: 'u3',\n      role: 'student',\n      name: 'Alex',\n      email: 'student@school.com',\n      password: 'student123',\n      verified: true\n    }]);\n  }\n  const classes = getJson(STORAGE_KEYS.classes, []);\n  if (!classes.length) {\n    setJson(STORAGE_KEYS.classes, [{\n      id: 'c1',\n      name: 'Grade 8 - Math',\n      subject: 'Math',\n      teacherId: 'u2',\n      studentIds: ['u3']\n    }]);\n  }\n};\nexport const authApi = {\n  login(email, password) {\n    const users = getJson(STORAGE_KEYS.users, []);\n    const user = users.find(u => u.email === email && u.password === password);\n    if (user && user.verified !== false) {\n      setJson(STORAGE_KEYS.currentUser, user);\n      return user;\n    }\n    return null;\n  },\n  logout() {\n    localStorage.removeItem(STORAGE_KEYS.currentUser);\n  },\n  current() {\n    return getJson(STORAGE_KEYS.currentUser, null);\n  }\n};\nexport const userApi = {\n  all() {\n    return getJson(STORAGE_KEYS.users, []);\n  },\n  saveAll(users) {\n    setJson(STORAGE_KEYS.users, users);\n  },\n  add(user) {\n    const users = getJson(STORAGE_KEYS.users, []);\n    users.push(user);\n    setJson(STORAGE_KEYS.users, users);\n    return user;\n  },\n  verify(userId, verified = true) {\n    const users = getJson(STORAGE_KEYS.users, []);\n    const idx = users.findIndex(u => u.id === userId);\n    if (idx >= 0) {\n      users[idx].verified = verified;\n      setJson(STORAGE_KEYS.users, users);\n    }\n  }\n};\nexport const classApi = {\n  all() {\n    return getJson(STORAGE_KEYS.classes, []);\n  },\n  saveAll(classes) {\n    setJson(STORAGE_KEYS.classes, classes);\n  },\n  create(klass) {\n    const classes = getJson(STORAGE_KEYS.classes, []);\n    classes.push(klass);\n    setJson(STORAGE_KEYS.classes, classes);\n    return klass;\n  },\n  assignTeacher(classId, teacherId) {\n    const classes = getJson(STORAGE_KEYS.classes, []);\n    const idx = classes.findIndex(c => c.id === classId);\n    if (idx >= 0) {\n      classes[idx].teacherId = teacherId;\n      setJson(STORAGE_KEYS.classes, classes);\n    }\n  },\n  addStudent(classId, studentId) {\n    const classes = getJson(STORAGE_KEYS.classes, []);\n    const idx = classes.findIndex(c => c.id === classId);\n    if (idx >= 0) {\n      const set = new Set(classes[idx].studentIds || []);\n      set.add(studentId);\n      classes[idx].studentIds = Array.from(set);\n      setJson(STORAGE_KEYS.classes, classes);\n    }\n  }\n};\nexport default {\n  STORAGE_KEYS,\n  getJson,\n  setJson,\n  bootstrapDefaults,\n  authApi,\n  userApi,\n  classApi\n};","map":{"version":3,"names":["STORAGE_KEYS","users","currentUser","classes","getJson","key","fallback","raw","localStorage","getItem","JSON","parse","e","setJson","value","setItem","stringify","bootstrapDefaults","length","id","role","name","email","password","verified","subject","teacherId","studentIds","authApi","login","user","find","u","logout","removeItem","current","userApi","all","saveAll","add","push","verify","userId","idx","findIndex","classApi","create","klass","assignTeacher","classId","c","addStudent","studentId","set","Set","Array","from"],"sources":["D:/gamify/src/components/utils/storage.js"],"sourcesContent":["// Simple localStorage-backed storage for demo purposes\r\nconst STORAGE_KEYS = {\r\n  users: 'glp_users',\r\n  currentUser: 'glp_current_user',\r\n  classes: 'glp_classes'\r\n};\r\n\r\nexport const getJson = (key, fallback) => {\r\n  try {\r\n    const raw = localStorage.getItem(key);\r\n    return raw ? JSON.parse(raw) : fallback;\r\n  } catch (e) {\r\n    return fallback;\r\n  }\r\n};\r\n\r\nexport const setJson = (key, value) => {\r\n  localStorage.setItem(key, JSON.stringify(value));\r\n};\r\n\r\nexport const bootstrapDefaults = () => {\r\n  const users = getJson(STORAGE_KEYS.users, []);\r\n  if (!users.length) {\r\n    setJson(STORAGE_KEYS.users, [\r\n      { id: 'u1', role: 'admin', name: 'Principal', email: 'admin@school.com', password: 'admin123', verified: true },\r\n      { id: 'u2', role: 'teacher', name: 'Ms. Smith', email: 'teacher@school.com', password: 'teacher123', verified: true },\r\n      { id: 'u3', role: 'student', name: 'Alex', email: 'student@school.com', password: 'student123', verified: true }\r\n    ]);\r\n  }\r\n  const classes = getJson(STORAGE_KEYS.classes, []);\r\n  if (!classes.length) {\r\n    setJson(STORAGE_KEYS.classes, [\r\n      { id: 'c1', name: 'Grade 8 - Math', subject: 'Math', teacherId: 'u2', studentIds: ['u3'] }\r\n    ]);\r\n  }\r\n};\r\n\r\nexport const authApi = {\r\n  login(email, password) {\r\n    const users = getJson(STORAGE_KEYS.users, []);\r\n    const user = users.find(u => u.email === email && u.password === password);\r\n    if (user && user.verified !== false) {\r\n      setJson(STORAGE_KEYS.currentUser, user);\r\n      return user;\r\n    }\r\n    return null;\r\n  },\r\n  logout() { localStorage.removeItem(STORAGE_KEYS.currentUser); },\r\n  current() { return getJson(STORAGE_KEYS.currentUser, null); }\r\n};\r\n\r\nexport const userApi = {\r\n  all() { return getJson(STORAGE_KEYS.users, []); },\r\n  saveAll(users) { setJson(STORAGE_KEYS.users, users); },\r\n  add(user) {\r\n    const users = getJson(STORAGE_KEYS.users, []);\r\n    users.push(user);\r\n    setJson(STORAGE_KEYS.users, users);\r\n    return user;\r\n  },\r\n  verify(userId, verified = true) {\r\n    const users = getJson(STORAGE_KEYS.users, []);\r\n    const idx = users.findIndex(u => u.id === userId);\r\n    if (idx >= 0) { users[idx].verified = verified; setJson(STORAGE_KEYS.users, users); }\r\n  }\r\n};\r\n\r\nexport const classApi = {\r\n  all() { return getJson(STORAGE_KEYS.classes, []); },\r\n  saveAll(classes) { setJson(STORAGE_KEYS.classes, classes); },\r\n  create(klass) {\r\n    const classes = getJson(STORAGE_KEYS.classes, []);\r\n    classes.push(klass);\r\n    setJson(STORAGE_KEYS.classes, classes);\r\n    return klass;\r\n  },\r\n  assignTeacher(classId, teacherId) {\r\n    const classes = getJson(STORAGE_KEYS.classes, []);\r\n    const idx = classes.findIndex(c => c.id === classId);\r\n    if (idx >= 0) { classes[idx].teacherId = teacherId; setJson(STORAGE_KEYS.classes, classes); }\r\n  },\r\n  addStudent(classId, studentId) {\r\n    const classes = getJson(STORAGE_KEYS.classes, []);\r\n    const idx = classes.findIndex(c => c.id === classId);\r\n    if (idx >= 0) {\r\n      const set = new Set(classes[idx].studentIds || []);\r\n      set.add(studentId);\r\n      classes[idx].studentIds = Array.from(set);\r\n      setJson(STORAGE_KEYS.classes, classes);\r\n    }\r\n  }\r\n};\r\n\r\nexport default { STORAGE_KEYS, getJson, setJson, bootstrapDefaults, authApi, userApi, classApi };\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}